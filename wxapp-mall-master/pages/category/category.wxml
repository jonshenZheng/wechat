<view class="main">

    <view class="{{'showALLSelOpt '+isShowAllopt}}">
        
        <form class='cont' bindsubmit="selectAlloptFn" bindreset='resetAlloptFn'>
            <view class='bg' bindtap='hideAlloptFn'></view>
            <view class='scroll'>

                <view class='optlist' wx:for="{{allSelOpt}}" wx:for-key="optk" wx:for-index="optallind" wx:for-item="optall">
                    <view class='til'>{{optall.name}}</view>
                    <view class='optBox'>                           
                        <checkbox-group name="v{{optallind}}">
                            <view class='it' wx:for="{{optall.values}}" wx:for-key="optk" wx:for-item="optaVue" wx:for-index="optaVueind">
                                <text>{{optaVue}}</text>

                                <block wx:if="{{optaVue || optaVue === 0 || optaVue === '0'}}">
                                    
                                        <icon bindtap='allOptSelOneFn' class='{{optall.sel_ind[optaVueind]}}' data-indo='{{optallind}}' data-indt='{{optaVueind}}' ></icon>                          
                                        <checkbox value="{{optaVue}}" checked="{{optall.sel_ind[optaVueind]}}" hidden='true'/>
                                    
                                </block>

                            </view>
                        </checkbox-group >
                    </view> 
                </view>
                
            </view>

            <view class='ALLSelBtnBox'>                     
                <button formType="reset">重置</button>
                <button formType="submit" class='gray'>确定</button>
            </view>

        </form>
    </view>

    <view class="categroy-left">
        <view wx:for="{{category}}" wx:key="index" data-fid="{{item.fid}}" data-id="{{item.cgid}}" data-index="{{index}}"
            bindtap="switchTab"
            class="cate-list {{curIndex === index?'on':''}}">{{item.name}}</view>
    </view>

    <scroll-view class="categroy-right" scroll-y="{{isScroll}}" lower-threshold="20" bindscrolltolower="upload" scroll-into-view="{{toView}}" scroll-with-animation="true">
         <block wx:for="{{category}}" wx:for-index="cgind" wx:key="index_cg" wx:for-item="item_cg">
            <view id="{{item_cg.cgid}}" class="cate-box">
                <view class='TwoLevelwp'>
                    <scroll-view class='TwoLevel' scroll-y="true">

                        <block wx:for="{{item_cg.detail.towlevel.list}}" wx:for-index="idx_s" wx:for-item="tmune" wx:key="index_tl">
                            <text bindtap='selLevel' data-fid="{{tmune.id}}" data-tabind='{{cgind}}' data-listid='{{idx_s}}' class="{{'TwoLevelOpt '+tmune.isSel}}">{{tmune.name}}</text>
                
                        </block>

                    </scroll-view>
                </view>
                
                <view class='selectArea'>
                    
                        <view class='sel-tab'>
                            <view class="tab-lb" data-ind="0" data-panind='{{cgind}}' bindtap='showpanFn'>价格区间<icon class='icon'></icon></view>
                            <view class="tab-lb" data-ind="1" data-panind='{{cgind}}' bindtap='showpanFn'>规格<icon class='icon'></icon></view>
                            <view class="tab-lb mainblue" bindtap='showAlloptFn'>筛选</view>
                        </view>
                        <block wx:for="{{showpanCt}}" wx:for-index="pani" wx:for-item="panO" wx:key="index_pn" >

                            <block wx:if="{{ 0 == pani}}">
                                <view class="tab-pan {{panO.isshow}} pan_act{{cgind}}">
                                    <form  bindsubmit="formSubmitFn2" bindreset="hidepanFn" data-ind="0">
                                        <view class='inp-line'>
                                            <text class='unit'>￥</text>
                                            <input name="minPriceV" data-ind='0' value='{{item_cg.detail.filter.minPrice}}' placeholder='最低价' type="digit" auto-focus='' bindblur='sortPrice' ></input>
                                            <text class='sp'>-</text>
                                            <input name='maxPriceV' data-ind='1' value='{{item_cg.detail.filter.maxPrice}}' placeholder='最高价' type="digit" bindblur='sortPrice' ></input>
                                        </view>
                                        <view class='inp-line btnBox'>
                                            <button class="sel-btn" formType="reset">取消</button>
                                            <button class="sel-btn gray" formType="submit">确定</button>
                                            
                                        </view>
                                    </form>
                                </view>
                            </block>
                        
                            <block wx:else>
                                <view class="tab-pan {{panO.isshow}} pan_act{{cgind}}">
                                    <form  bindsubmit="formSubmitFn2" bindreset="hidepanFn" data-ind="1">
                                        <view class='danwei'>单位：毫米</view>
                                        <view class='inp-line' style="border-bottom:2rpx solid #ccc;">
                                            <input name='lengthV' type="digit" placeholder='长度' auto-focus=''></input>
                                            <text class='sp'>-</text>
                                            <input name='widthV'  type="digit" placeholder='宽度'></input>
                                            <text class='sp'>-</text>
                                            <input name='heightV'  type="digit" placeholder='高度'></input>
                                        </view>
                                        <view class='inp-line btnBox'>
                                            <button class="sel-btn" formType="reset">取消</button>
                                            <button class="sel-btn gray" formType="submit">确定</button>
                                        </view>
                                    </form> 
                                </view>
                            </block>
                        
                        </block>
                
                </view>

                <view class='scrollbox'> 
                    <scroll-view  scroll-y="true" class="prodlibbox" bindscrolltolower="upload" >
                        <view class='pl_box'>

                            <block wx:for="{{item_cg.detail.prod.showPd}}" wx:for-index="idx" wx:for-item="pls" wx:key="index_pd">
                                <navigator url="{{'../details/details?prodId='+pls.prodId+'&skuId='+pls.skuId}}" class='pd_it'>
                                    <view class='imgWp'>
                                        <image src='{{baseImgUrl+pls.path}}' binderror='loadingfail' mode='aspectFit' data-imgind='{{idx}}'></image>
                                    </view>                              
                                    <text class='pdName'>{{pls.prodName}}</text>
                                    <text class='pdprice'>{{'￥'+pls.price}}</text>
                                </navigator>
                            </block>
                            
                            <view wx:if="{{!item_cg.detail.prod.showPd.length}}" class='no-data'>暂无相关产品</view>

                        </view>

                        <block wx:if="{{item_cg.detail.prod.showPd.length}}">
                            <view class="weui-loadmore" wx:if="{{item_cg.detail.prod.hasMore}}">
                                <view class="weui-loading"></view>
                                <view class="weui-loadmore__tips">正在加载</view>
                            </view>
                            <view wx:else class="weui-loadmore">
                                <text class="weui-loadmore__tips">没有更多内容</text> 
                            </view>
                        </block>
                        
                    </scroll-view>
                
                </view>

                
            </view>
        </block> 

    </scroll-view>

</view>